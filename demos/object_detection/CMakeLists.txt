# DXRT App : Object Detection

set(common_srcs bbox.cpp display.cpp nms.cpp v4l2.cpp socket.cpp fb.cpp)
set(yolo_srcs ${common_srcs} yolo.cpp yolo_cfg.cpp yolo_demo.cpp)
set(yolo_multi_srcs bbox.cpp display.cpp nms.cpp yolo.cpp yolo_cfg.cpp yolo_demo_multi.cpp od.cpp)
set(ssd_srcs ${common_srcs} ssd.cpp ssd_cfg.cpp ssd_demo.cpp)
if(CMAKE_SYSTEM_PROCESSOR STREQUAL "riscv64")
set(ENX_MEDIALINK_LIB ${CMAKE_CURRENT_SOURCE_DIR}/libenxmedialink.a)
set(yolo_srcs ${yolo_srcs} isp_eyenix.cpp)
endif()

add_executable(yolo ${yolo_srcs})
if(CMAKE_SYSTEM_PROCESSOR STREQUAL "riscv64")
target_link_libraries(yolo ${ENX_MEDIALINK_LIB})
endif()
add_executable(ssd ${ssd_srcs})
if(USE_OPENCV)
add_executable(yolo_multi ${yolo_multi_srcs})
add_executable(od_client ${common_srcs} od_client.cpp)
endif()

add_dxrt_lib()
add_opencv()

add_target(yolo)
add_target(ssd)
if(USE_OPENCV)
add_target(yolo_multi)
add_target(od_client)
endif()